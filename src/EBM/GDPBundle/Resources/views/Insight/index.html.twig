{% extends "@EBMGDP/bundleLayoutTeacher.html.twig" %}

{# Titre de l'onglet #}
{% block title %}
    Gestion de projet
{% endblock %}

{# CSS propres � cette page #}
{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('bundles/coreiconbar/css/plugins/charts/chartjs.css') }}">

{% endblock %}

{# Contenu de la page #}

{% block content_body %}

    {# Tableau Projets #}
    {%  if listProjects is null or listProjects|length == 0 %}
        <p class="margin-20 text-center">Aucun projet n'a été trouvé</p>
    {% else %}
        {% include "EBMGDPBundle:Insight/components:projectsTable.html.twig" %}
    {% endif %}

    {# Tableau Projets #}
    {%  if listTasks is null or listTasks|length == 0 %}
        <p class="margin-20 text-center">Aucune tâche n'a été trouvée</p>
    {% else %}
        {% include "EBMGDPBundle:Insight/components:taskDonut.html.twig" %}
    {% endif %}


{% endblock %}


{# Scripts propres � cette page #}
{% block scripts %}
    <script src="{{ asset('bundles/coreiconbar/theme/global/vendor/chart-js/Chart.js') }}"></script>
    <script>
        // Example Chartjs Donut
        // ---------------------
        (function(document, window, $) {
            'use strict';
            var Site = window.Site;

            $(document).ready(function($) {
                Site.run();
            });

            Chart.defaults.global.responsive = true;

            (function() {
                var doughnutData = [{
                    value: {{ nbTaskOpened }},
                    style: $.colors("cran", 400),
                    label: "Tâche ouverte"
                }, {
                    value: {{ nbTaskWorking }},
                    style: $.colors("green", 200),
                    label: "Tâche en cours"
                }, {
                    value: {{ nbTaskWaiting }},
                    style: $.colors("orange", 600),
                    label: "Tâche en attente"
                }, {
                        value: {{ nbTaskValidated }},
                        style: $.colors("green", 800),
                        label: "Tâche validée"
                    }, {
                        value: {{ nbTaskRejected }},
                        style: $.colors("red", 700),
                        label: "Tâche rejetée"
                    }, {
                        value: {{ nbTaskArchived }},
                        style: $.colors("grey", 500),
                        label: "Tâche archivée"
                    }];

                var myDoughnut = new Chart(document.getElementById("donutTask").getContext("2d")).Doughnut(doughnutData);
            })();

        })(document, window, jQuery);
    </script>

{% endblock %}
