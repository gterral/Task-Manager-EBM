{% extends "@EBMMateriel/bundleLayout.html.twig" %}

{# Titre de l'onglet #}
{% block title %}
    Réservation d'une machine
{% endblock %}

{# CSS propres à cette page #}
{% block stylesheets %}

{% endblock %}

{% block content_body %}


    <div class="col-md-6">

        <form action="{{ path('ebm_materiel_machines_reservation_submit') }}" method="post" id="reservationForm">

            <h1 class="page-title">Nouvelle réservation de machine du Fab Lab</h1>

            <h4 class="example-title">Prénom et nom de l'utilisateur</h4>
            <div class="input-group input-group-icon">
                    <span class="input-group-addon">
                      <span class="icon md-account" aria-hidden="true"></span>
                    </span>

                <input type="text" name="username" class="form-control" value="{{ user.getUsername() }}" readonly>
            </div>

            <h4 class="example-title">Projet associé</h4>

            <div class="form-group">
                <select name="projet" class="form-control">
                    {% for p in projets %}
                        <option value="{{ p.getId() }}">{{ p.getName() }}</option>
                    {% endfor %}
                </select>
            </div>

            <h4 class="example-title">Machine à réserver</h4>
            <div class="form-group">
                <select name="machine" class="form-control">
                    {% for m in machines %}
                            <option value="{{ m.getId() }}" {% if m.getId() == selectedMachine %}selected{% endif %}>{{ m.getNom() }}</option>
                    {% endfor %}
                </select>
            </div>




            <div class="example-wrap">
                <div class="example datepair-wrap" data-plugin="datepair">
                    <div class="input-daterange-wrap">
                        <div class="input-daterange">
                            <div class="input-group">
                    <span class="input-group-addon">
                      <i class="icon md-calendar" aria-hidden="true"></i>
                    </span>
                                <input type="text" class="form-control datepair-date datepair-start" data-plugin="datepicker">
                            </div>
                            <div class="input-group">
                    <span class="input-group-addon">
                      <i class="icon md-time" aria-hidden="true"></i>
                    </span>
                                <input type="text" class="form-control datepair-time datepair-start ui-timepicker-input" data-plugin="timepicker" autocomplete="off">
                            </div>
                        </div>
                    </div>
                    <div class="input-daterange-to">to</div>
                    <div class="input-daterange-wrap">
                        <div class="input-daterange">
                            <div class="input-group">
                    <span class="input-group-addon">
                      <i class="icon md-calendar" aria-hidden="true"></i>
                    </span>
                                <input type="text" class="form-control datepair-date datepair-end" name="end" data-plugin="datepicker">
                            </div>
                            <div class="input-group">
                    <span class="input-group-addon">
                      <i class="icon md-time" aria-hidden="true"></i>
                    </span>
                                <input type="text" class="form-control datepair-time datepair-end ui-timepicker-input" data-plugin="timepicker" autocomplete="off">
                            </div>
                        </div>
                    </div>
                </div>
            </div>





            <h4 class="example-title">Date de début de réservation</h4>
            <div class="input-group">
                <span class="input-group-addon">
                    <i class="icon md-calendar" aria-hidden="false"></i>
                </span>
                <input type="text" name="debut" class="form-control" data-plugin="datepicker">
            </div>


            <div class="input-group">
            <span class="input-group-addon">
                <i class="icon md-time" aria-hidden="true"></i>
            </span>
                <input type="text" name="fin" class="form-control" data-plugin="timepicker" data-min-time="8:00"
                       data-max-time="18:00" data-show-duration="true" />
            </div><br>


            <input type="submit" value="submit">
        </form>

    </div>
{% endblock %}


{# Scripts propres à cette page #}
{% block scripts %}

        <script src="https://jonthornton.github.io/jquery-timepicker/jquery.timepicker.js"></script>
        <link rel="stylesheet" type="text/css" href="https://jonthornton.github.io/jquery-timepicker/jquery.timepicker.css">

        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.5.0/js/bootstrap-datepicker.js"></script>
        <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.5.0/css/bootstrap-datepicker.standalone.css">

        <script src="{{ asset('datepair/lib/pikaday.js') }}"></script>
        <link rel="stylesheet" type="text/css" href="{{ asset('datepair/lib/pikaday.css')}}">

        <script src="{{ asset('datepair/lib/jquery.ptTimeSelect.js')}}"></script>
        <link rel="stylesheet" type="text/css" href="{{ asset('datepair/lib/jquery.ptTimeSelect.css')}}">
        <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/ui-lightness/jquery-ui.css" type="text/css" media="all">

        <script src="{{ asset('datepair/lib/moment.min.js')}}"></script>
        <script src="{{ asset('datepair/lib/site.js')}}"></script>
        <link rel="stylesheet" type="text/css" href="lib/site.css">

        <script src="{{ asset('datepair/dist/datepair.js')}}"></script>
        <script src="{{ asset('datepair/dist/jquery.datepair.js')}}"></script>
    <script>
        // initialize input widgets first
        $(document).ready(function() {

            $('.datepair-time').timepicker({
                'showDuration': true,
                'timeFormat': 'g:ia'
            });

            $('.datepair-date').datepicker({
                'format': 'm-d-yyyy',
                'autoclose': true
            });

            // initialize datepair
            var basicExampleEl = document.getElementById('datepicker');
            var datepair = new Datepair(basicExampleEl);
        });
    </script>
{% endblock %}